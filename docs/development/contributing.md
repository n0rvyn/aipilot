# 贡献指南

感谢您考虑为 AIPilot 做出贡献！本文档将指导您完成贡献流程。

## 🌟 如何贡献

我们欢迎各种形式的贡献：

- 🐛 报告 Bug
- 💡 提出新功能建议
- 📝 改进文档
- 🔧 提交代码
- 🌍 翻译
- 🎨 UI/UX 改进

## 📋 开始之前

### 1. 熟悉项目

- 阅读 [README](../../README.md) 了解项目
- 查看 [架构文档](../architecture/overview.md) 理解设计
- 浏览现有 [Issues](https://github.com/norvyn/aipilot/issues) 和 [PR](https://github.com/norvyn/aipilot/pulls)

### 2. 搭建开发环境

按照 [开发环境搭建](setup.md) 指南配置环境。

### 3. 了解代码规范

- TypeScript 风格遵循 ESLint 配置
- 使用有意义的变量和函数名
- 添加必要的注释和文档

## 🐛 报告 Bug

### Bug 报告模板

```markdown
## Bug 描述
简要描述问题

## 复现步骤
1. 打开...
2. 点击...
3. 输入...
4. 看到错误

## 预期行为
应该发生什么

## 实际行为
实际发生了什么

## 环境信息
- OS: [例如 macOS 13.0]
- Obsidian 版本: [例如 1.4.0]
- AIPilot 版本: [例如 1.0.19]

## 截图/日志
如果适用，添加截图或控制台日志

## 额外信息
其他相关信息
```

### 提交 Bug 前的检查清单

- [ ] 搜索过现有 Issues，确认不是重复问题
- [ ] 使用最新版本的插件
- [ ] 在控制台查看错误信息
- [ ] 尝试禁用其他插件排查冲突
- [ ] 提供完整的复现步骤

## 💡 功能建议

### 功能建议模板

```markdown
## 功能描述
清晰描述您希望添加的功能

## 动机和使用场景
- 为什么需要这个功能？
- 谁会使用它？
- 解决什么问题？

## 建议的实现方式
如果有想法，描述可能的实现方法

## 替代方案
是否考虑过其他解决方案？

## 额外信息
相关链接、参考等
```

### 评估标准

我们会根据以下标准评估功能建议：

1. **对齐度**: 与项目目标的契合程度
2. **影响力**: 有多少用户会受益
3. **复杂度**: 实现难度和维护成本
4. **替代性**: 是否可以通过现有功能实现

## 🔧 提交代码

### 工作流程

1. **Fork 仓库**
   ```bash
   # 在 GitHub 上点击 Fork 按钮
   git clone https://github.com/你的用户名/aipilot.git
   cd aipilot
   ```

2. **创建分支**
   ```bash
   git checkout -b feature/your-feature-name
   # 或
   git checkout -b fix/your-bug-fix
   ```

   分支命名规范：
   - `feature/功能名` - 新功能
   - `fix/问题名` - Bug 修复
   - `docs/文档名` - 文档更新
   - `refactor/模块名` - 代码重构
   - `test/测试名` - 测试相关

3. **开发和测试**
   ```bash
   # 安装依赖
   npm install
   
   # 开发模式
   npm run dev
   
   # 测试你的更改
   # 在 Obsidian 中启用插件并测试功能
   ```

4. **提交更改**
   ```bash
   git add .
   git commit -m "feat: 添加新功能"
   ```

   Commit 消息规范（遵循 [Conventional Commits](https://www.conventionalcommits.org/)):
   ```
   类型(范围): 简短描述

   详细描述（可选）

   相关 Issue（可选）
   ```

   类型：
   - `feat`: 新功能
   - `fix`: Bug 修复
   - `docs`: 文档更新
   - `style`: 代码格式（不影响功能）
   - `refactor`: 重构
   - `perf`: 性能优化
   - `test`: 测试
   - `chore`: 构建/工具配置

   示例：
   ```
   feat(rag): 添加 HyDE 查询增强

   实现了假设文档嵌入(HyDE)功能，提高检索质量。

   Closes #123
   ```

5. **推送到 GitHub**
   ```bash
   git push origin feature/your-feature-name
   ```

6. **创建 Pull Request**
   - 在 GitHub 上打开 Pull Request
   - 填写 PR 模板
   - 等待代码审查

### Pull Request 模板

```markdown
## 更改类型
- [ ] Bug 修复
- [ ] 新功能
- [ ] 文档更新
- [ ] 代码重构
- [ ] 性能优化
- [ ] 其他

## 描述
清晰描述这个 PR 做了什么

## 相关 Issue
Closes #issue_number

## 测试
- [ ] 在 macOS 测试
- [ ] 在 Windows 测试
- [ ] 在 Linux 测试
- [ ] 添加了测试用例
- [ ] 所有测试通过

## 截图
如果是 UI 更改，添加截图

## 检查清单
- [ ] 代码遵循项目风格
- [ ] 添加了必要的注释
- [ ] 更新了相关文档
- [ ] 没有引入新的警告
- [ ] 已测试所有更改
```

### 代码审查

提交 PR 后：

1. **自动检查**: CI 会自动运行 linter 和构建
2. **代码审查**: 维护者会审查你的代码
3. **反馈和修改**: 根据反馈进行修改
4. **合并**: 审查通过后会被合并

### 审查标准

代码会根据以下标准审查：

- ✅ 功能正确性
- ✅ 代码质量和可维护性
- ✅ 性能影响
- ✅ 安全性
- ✅ 向后兼容性
- ✅ 文档完整性
- ✅ 测试覆盖率

## 📝 文档贡献

文档同样重要！贡献文档的方式：

### 1. 改进现有文档

- 修正错别字和语法错误
- 添加缺失的信息
- 改进示例代码
- 更新过时内容

### 2. 添加新文档

- 使用指南
- 最佳实践
- 常见问题解答
- 教程和示例

### 文档风格指南

- 使用 Markdown 格式
- 清晰的标题层级
- 提供代码示例
- 添加图表和截图
- 简洁明了的语言

## 🌍 翻译

帮助翻译 AIPilot 到其他语言：

### 翻译流程

1. 检查是否已有该语言的翻译工作
2. 创建新的语言文件（如 `README.ja.md`）
3. 翻译内容
4. 提交 PR

### 翻译指南

- 保持原意和语气
- 使用当地习惯用语
- 保留代码示例不变
- 更新语言选择器

## 🎨 UI/UX 改进

改进用户界面和体验：

### 设计原则

1. **一致性**: 遵循 Obsidian 设计语言
2. **简洁性**: 避免过度设计
3. **可访问性**: 支持键盘导航和屏幕阅读器
4. **响应式**: 适配不同屏幕尺寸

### UI 更改流程

1. 创建设计稿或原型
2. 在 Issue 中讨论设计
3. 获得反馈后实现
4. 提供截图和 GIF 演示

## 🧪 测试

### 手动测试

提交代码前请测试：

- [ ] 基本功能正常工作
- [ ] 没有控制台错误
- [ ] 没有内存泄漏
- [ ] 与其他插件兼容
- [ ] 在不同操作系统测试

### 自动化测试（TODO）

未来计划添加：
- 单元测试
- 集成测试
- E2E 测试

## 📊 代码统计

贡献后的统计：

```bash
# 查看代码统计
npm run stats

# 查看贡献者
git log --format='%aN' | sort -u
```

## 🏆 贡献者

所有贡献者都会被列在：
- README 中的贡献者列表
- [Contributors](https://github.com/norvyn/aipilot/graphs/contributors) 页面

## ❓ 需要帮助？

如果有任何问题：

- 💬 在 [Discussions](https://github.com/norvyn/aipilot/discussions) 提问
- 📧 发送邮件到 [contact@norvyn.com](mailto:contact@norvyn.com)
- 💬 加入 Discord 社区（如果有）

## 📜 行为准则

### 我们的承诺

为了营造一个开放和友好的环境，我们承诺：

- 尊重不同的观点和经验
- 优雅地接受建设性批评
- 关注对社区最有利的事情
- 对其他成员表示同理心

### 不可接受的行为

- 使用性暗示语言或图像
- 人身攻击或侮辱性评论
- 公开或私下骚扰
- 未经许可发布他人隐私信息
- 其他不专业或不道德的行为

### 执行

不可接受的行为可以报告给项目维护者。所有投诉都会被审查和调查。

## 📄 许可证

通过贡献代码，您同意您的贡献将在 [MIT License](../../LICENSE) 下授权。

## 🙏 感谢

感谢所有贡献者让 AIPilot 变得更好！

特别感谢：
- Obsidian 团队提供优秀的平台
- 所有提供反馈的用户
- 开源社区的支持

---

**准备开始贡献了吗？** 查看 [Good First Issues](https://github.com/norvyn/aipilot/labels/good%20first%20issue) 开始你的第一个贡献！

